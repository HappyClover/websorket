<html>
<head>
    <meta charset="utf-8">
    <title>윙스테이션 어플리케이션으로 이동중입니다.</title>
    <style type="text/css">
        .wrap{
            display: flex;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        span{
            font-size: 20px;
        }

        @keyframes ldio-oqfi9xzfcmr {
            0% { opacity: 1 }
            100% { opacity: 0 }
        }

        .ldio-oqfi9xzfcmr div {
            left: 94px;
            top: 48px;
            position: absolute;
            animation: ldio-oqfi9xzfcmr linear 1s infinite;
            background: #ffce00;
            width: 12px;
            height: 24px;
            border-radius: 6px / 12px;
            transform-origin: 6px 52px;
        }.ldio-oqfi9xzfcmr div:nth-child(1) {
             transform: rotate(0deg);
             animation-delay: -0.9166666666666666s;
             background: #ffce00;
         }.ldio-oqfi9xzfcmr div:nth-child(2) {
              transform: rotate(30deg);
              animation-delay: -0.8333333333333334s;
              background: #ffce00;
          }.ldio-oqfi9xzfcmr div:nth-child(3) {
               transform: rotate(60deg);
               animation-delay: -0.75s;
               background: #ffce00;
           }.ldio-oqfi9xzfcmr div:nth-child(4) {
                transform: rotate(90deg);
                animation-delay: -0.6666666666666666s;
                background: #ffce00;
            }.ldio-oqfi9xzfcmr div:nth-child(5) {
                 transform: rotate(120deg);
                 animation-delay: -0.5833333333333334s;
                 background: #ffce00;
             }.ldio-oqfi9xzfcmr div:nth-child(6) {
                  transform: rotate(150deg);
                  animation-delay: -0.5s;
                  background: #ffce00;
              }.ldio-oqfi9xzfcmr div:nth-child(7) {
                   transform: rotate(180deg);
                   animation-delay: -0.4166666666666667s;
                   background: #ffce00;
               }.ldio-oqfi9xzfcmr div:nth-child(8) {
                    transform: rotate(210deg);
                    animation-delay: -0.3333333333333333s;
                    background: #ffce00;
                }.ldio-oqfi9xzfcmr div:nth-child(9) {
                     transform: rotate(240deg);
                     animation-delay: -0.25s;
                     background: #ffce00;
                 }.ldio-oqfi9xzfcmr div:nth-child(10) {
                      transform: rotate(270deg);
                      animation-delay: -0.16666666666666666s;
                      background: #ffce00;
                  }.ldio-oqfi9xzfcmr div:nth-child(11) {
                       transform: rotate(300deg);
                       animation-delay: -0.08333333333333333s;
                       background: #ffce00;
                   }.ldio-oqfi9xzfcmr div:nth-child(12) {
                        transform: rotate(330deg);
                        animation-delay: 0s;
                        background: #ffce00;
                    }
        .loadingio-spinner-spinner-07weve0tl0nd {
            width: 200px;
            height: 200px;
            display: inline-block;
            overflow: hidden;
        }
        .ldio-oqfi9xzfcmr {
            width: 100%;
            height: 100%;
            position: relative;
            transform: translateZ(0) scale(1);
            backface-visibility: hidden;
            transform-origin: 0 0; /* see note above */
        }
        .ldio-oqfi9xzfcmr div { box-sizing: content-box; }
        /* generated by https://loading.io/ */
    </style>
</head>
<body>
<div class="wrap">
    <div class="loadingio-spinner-spinner-07weve0tl0nd"><div class="ldio-oqfi9xzfcmr">
            <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
        </div></div><br>
    <span>윙스테이션 어플리케이션으로<br>이동중입니다.</span>
</div>

<script>
    const route = "<%= route %>";
    const code = "<%= code %>";

    (function() {

        /**
         * 사이트 네임스페이스 초기화
         */
        var initNamespace = function() {
            if (typeof window.lddi === 'undefined') {
                window.lddi = {
                    util: {},
                    siteCode: {}
                };
            }
        };


        var AppLink = {
            aosUrl: 'intent://scan/#Intent;scheme=wingstation;package=com.shability.wingstation;end',
            iosUrl: 'http://itunes.apple.com/app/id',
            customSchemeMain: 'wingstation://qr',
            googlePlayUrl: 'https://play.google.com/store/apps/details?id=com.shability.wingstation',
            isIPHONE: (navigator.userAgent.match('iPhone') != null || navigator.userAgent.match('iPod') != null),
            isIPAD: (navigator.userAgent.match('iPad') != null),
            isANDROID: (navigator.userAgent.match('Android') != null),
            isMobile: function () {
                if (AppLink.isANDROID || AppLink.isIPHONE || AppLink.isIPAD) {
                    return true;
                } else {
                    alert('모바일 환경에서만 동작합니다.');
                    return false;
                }
            },
            installApp: function () {
                if (AppLink.isIPHONE || AppLink.isIPAD) {
                    // 2019-03-22 timer
                    AppLink.iosLink();
                } else if (AppLink.isANDROID) {
                    AppLink.androidIntent(AppLink.aosUrl);
                }
            },
            executeApp: function (url) {
                if (AppLink.isIPHONE || AppLink.isIPAD) {
                    window.location.href = url;
                } else if (AppLink.isANDROID) {
                    AppLink.androidCustomScheme(url);
                }
            },
            ios: function () {
                AppLink.iosLink();

                window.location.href = AppLink.customSchemeMain; //앱이동
            },
            /**
             * ios 마켓 링크 이동
             */
            iosLink: function () {
                var clickedAt = +new Date;
                setTimeout(function () {
                    if (+new Date - clickedAt < 2000) {
                        window.location.href = AppLink.iosUrl;
                    }
                }, 1500);
            },
            androidIntent: function (url) {
                var b = new Date();
                setTimeout(function () {
                    if (new Date() - b < 1500) {
                        window.location.href = url;
                    }
                }, 500);
            },
            /**
             * android 커스텀스킴 이동
             */
            androidCustomScheme: function (customScheme) {
                setTimeout(function () {
                    var iframe = document.createElement('iframe');
                    iframe.style.visibility = 'hidden';
                    iframe.src = customScheme;
                    document.body.appendChild(iframe);
                    document.body.removeChild(iframe); // back 호출시 캐싱될 수 있으므로 제거
                }, 1000);
            },
            android: function () {
                if (AppLink.isANDROID || AppLink.isIPHONE || AppLink.isIPAD) {
                    AppLink.androidIntent(AppLink.aosUrl);
                    AppLink.androidCustomScheme(AppLink.customSchemeMain);
                } else {
                    window.location.href = AppLink.googlePlayUrl;
                }
            },
            appMove: function (customScheme, isAppMove) {
                if (!customScheme) {
                    //main 이동
                    customScheme = AppLink.customSchemeMain;
                }

                // 바로 앱 이동일 경우
                if (isAppMove) {
                    if (AppLink.isANDROID) {
                        AppLink.androidIntent(AppLink.aosUrl);
                    }

                    AppLink.executeApp(customScheme);
                } else {
                    if (!AppLink.isMobile()) return;
                    AppLink.installApp(); //app move
                    AppLink.executeApp(customScheme);
                }
            }
        };

        (function () {
            initNamespace();
            lddi.AppLink = AppLink;
        })();

        return lddi;
    })();
</script>
</body>
</html>

